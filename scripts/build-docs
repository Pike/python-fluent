#!/usr/bin/env python3

import argparse

from fluent.docs import build_root, finalize_builddir
from fluent.docs.build import build


if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument(
        'repo_name',
        help='URL prefix on the web. Repo name on gh-pages'
    )
    default_docs = ['.', 'fluent.syntax', 'fluent.pygments', 'fluent.runtime']
    parser.add_argument(
        '--doc', action='append', choices=default_docs,
        help='Only build select documentation roots.'
    )
    args = parser.parse_args()
    if args.doc is None:
        args.doc = default_docs[:]
    if '.' in args.doc:
        build_root(args.repo_name)
        args.doc.remove('.')
    build(args.repo_name, args.doc)
    finalize_builddir(args.repo_name)
